Technical Architecture and Product Requirements for "NotebookNest": A Smart Folder Extension for Google NotebookLM1. Executive SummaryThe rapid integration of Large Language Models (LLMs) into personal knowledge management (PKM) workflows has catalyzed a shift from static document storage to dynamic, retrieval-augmented interaction. Google NotebookLM, a Retrieval-Augmented Generation (RAG) platform, stands at the forefront of this shift by allowing users to ground AI responses in specific, user-selected source documents.1 While the platform excels at synthesizing information from up to 50 sources per notebook, its current interface—a flat, linear grid of projects—fails to scale with the needs of power users who manage dozens or hundreds of notebooks.3 As adoption grows among academics, legal professionals, and content creators, the absence of hierarchical organization has become a critical friction point, leading users to fragment their workflows across multiple accounts or rely on external bookmarking tools to manage their research assets.5This report presents a comprehensive technical specification and Product Overview and Requirements Document (PORD) for "NotebookNest" (working title), a Chrome extension designed to retrofit advanced organizational capabilities onto the existing NotebookLM Single Page Application (SPA). Unlike simple bookmark managers, NotebookNest introduces an architectural layer of "Smart Folders"—dynamic containers governed by Boolean logic and metadata tagging—mirroring the advanced file management systems found in integrated development environments (IDEs) and operating systems like macOS.6The proposed solution is architected as a privacy-first, client-side overlay. By leveraging the browser’s local storage and synchronization APIs, the extension creates a persistent organizational state without transmitting user data to external servers, a crucial requirement for users handling sensitive intellectual property.8 This document details the reverse-engineering strategy required to interface with Google’s obfuscated DOM, the algorithmic logic for client-side filtering, and the user-centric requirements that define the product’s scope. The analysis demonstrates that while the technical barrier is moderate due to the lack of a public API, the strategic value of unlocking a structured workspace for high-volume users is substantial.2. Strategic Context and Market Analysis2.1 The Rise of RAG-Based Knowledge WorkThe evolution of digital note-taking has moved from simple text capture (Evernote) to networked thought (Obsidian, Roam) and now to AI-synthesized knowledge bases. NotebookLM represents this third wave, where the value lies not just in storage, but in the AI’s ability to "reason" over specific documents.10 However, the organizational paradigm of NotebookLM has not kept pace with its functional capabilities. Currently, the platform treats every notebook as an equal entity on a single dashboard plane.For a casual user with five notebooks, this is adequate. For a doctoral candidate conducting a systematic literature review involving 200 papers distributed across 40 notebooks, or a legal analyst managing 15 distinct client cases, the linear interface becomes unmanageable.4 The cognitive load shifts from "thinking about the content" to "finding the content." This phenomenon is known as the "clutter threshold," where the time cost of retrieval begins to negate the efficiency gains of the tool.2.2 The Gap: Static vs. Dynamic OrganizationCurrent user behavior involves "hacks" to circumvent these limitations. Research indicates users are merging disparate documents into single notebooks to save "slots" or using browser folders to organize notebook URLs.4 These are fragile solutions. The market gap exists for a tool that offers:Hierarchy: The ability to nest projects (e.g., Client A > Q1 Projects > Financial Analysis).Metadata: The ability to tag projects with status indicators (e.g., Draft, Review, Final).8Automation: The ability to define rules that organize content automatically (e.g., "All notebooks containing 'Physics' created this week").The "Smart Folder" concept, validated by features in Microsoft Outlook and macOS Finder, addresses this by treating folders as saved search queries rather than static containers.7 This aligns with the mental models of power users who expect their tools to do the sorting for them.2.3 The "Parasitic" Overlay ModelDeveloping this solution as a Chrome extension enables a "parasitic" or "symbiotic" relationship with the host platform. By injecting code directly into the Document Object Model (DOM) of the NotebookLM SPA, the extension can manipulate the visual presentation of data—hiding unrelated notebooks, inserting headers, overlaying tags—without requiring access to Google's backend databases.13 This approach allows for rapid feature deployment independent of Google's product roadmap, a strategy successfully employed by extensions enhancing other Google Workspace tools.153. Product Overview and Requirements Document (PORD)This section outlines the definitive requirements for NotebookNest, structured to guide engineering and design teams. It serves as the "source of truth" for what the product must achieve.3.1 Product DefinitionProduct Name: NotebookNest (Internal Code: NB-Organizer)Platform: Google Chrome Extension (Manifest V3) / Edge Compatible.Target Audience: "Power Users" of NotebookLM—defined as users with >20 active notebooks or distinct separation needs (e.g., work/personal).Core Value Proposition: To transform the chaotic, flat list of NotebookLM projects into a structured, queryable, and visually organized workspace, utilizing local browser storage to ensure privacy and speed.3.2 User PersonasTo ensure the requirements meet real-world needs, we define three primary personas based on user feedback and usage patterns identified in the research.33.2.1 Persona A: Dr. Aris (The Academic Researcher)Profile: A Post-Doc researcher in Computational Biology. She manages over 100 notebooks, each representing a specific paper, grant proposal, or experiment analysis.Pain Point: She struggles to differentiate between "Active" experiments and "Archived" literature reviews. The flat list creates anxiety that she is losing track of critical drafts.Behavior: She uses precise naming conventions (e.g., "2024_Grant_NSF_Draft") to compensate for the lack of folders.Need: She needs Smart Folders that automatically group notebooks based on her naming conventions (e.g., a folder that grabs everything with "NSF" in the title) so she doesn't have to drag-and-drop every new notebook.3.2.2 Persona B: Jordan (The Content Creator)Profile: A podcaster and tech analyst who uses NotebookLM to generate "Audio Overviews" (podcasts) from tech news articles.17Pain Point: Jordan produces daily content. His dashboard is flooded with "Untitled Notebooks" and ephemeral projects. He needs to separate "In Progress" scripts from "Published" archives.Behavior: He often deletes notebooks immediately after use because the clutter is overwhelming, losing long-term value.Need: He needs Color-Coded Tags (e.g., Red for "To Do," Green for "Done") to visually scan his dashboard and a "Trash" or "Archive" folder to hide completed work without permanently deleting it.3.2.3 Persona C: Sarah (The Enterprise Consultant)Profile: A management consultant working with three distinct client companies. She cannot risk accidental context switching (e.g., opening Client A's financial data while on a call with Client B).Pain Point: All her notebooks look the same. The "Recent" view mixes client projects indiscriminately.Behavior: She uses separate Google Accounts for each client to force separation, which is clumsy and requires constant logging in and out.19Need: She needs Static Folders (Client A, Client B) that function as rigid workspaces. When she enters the "Client A" folder, she wants to see only those notebooks, effectively filtering out the noise.3.3 Functional Requirements (FR)The Functional Requirements describe the specific behaviors and functions the system must support.3.3.1 Sidebar Interface and NavigationFR-01 (Sidebar Injection): The system must inject a persistent, vertical sidebar on the left side of the https://notebooklm.google.com/ interface.15FR-02 (Collapsibility): The sidebar must be collapsible to a "mini-rail" icon state to preserve screen real estate on smaller displays. The state (collapsed/expanded) must persist across page reloads.FR-03 (Visual Integration): The sidebar must utilize Google’s Material 3 Design tokens (colors, typography, spacing) to ensure it appears native to the application. It must support both Light and Dark modes by inheriting CSS variables from the host page.20FR-04 (Responsive Overlay): On viewports narrower than 1000px, the sidebar should overlay the content with a backdrop blur, rather than shrinking the main content grid.213.3.2 Tagging and Metadata SystemFR-05 (Tag Creation): Users must be able to create custom text tags associated with a specific Notebook ID.FR-06 (Tag Visualization): Tags must be rendered as small, colored "chips" or badges directly on the Notebook Card within the main grid view.FR-07 (Context Menu): A custom context menu (accessible via right-click or a distinct "More" button on the card) must be injected to allow users to "Add Tag," "Edit Tag," or "Move to Folder" directly from the card.8FR-08 (Color Coding): Users must be able to assign a hex color code to each tag for visual differentiation.3.3.3 Smart Folder Logic EngineFR-09 (Boolean Logic): The system must support the creation of "Smart Folders" defined by a set of conditional rules. The supported logic operators must include AND, OR, and NOT.6FR-10 (Filter Criteria): The system must support filtering based on the following metadata fields extracted from the DOM:Title: (Operators: Contains, Starts With, Is Exact Match).Date Modified: (Operators: Is Today, Is This Week, > X Days Ago).4Source Count: (Operators: > X Sources, < X Sources).Tags: (Operators: Has Tag, Does Not Have Tag).FR-11 (Dynamic Updates): Smart Folders must be "live." If a user renames a notebook to include a keyword like "Thesis," it must immediately appear in the "Thesis" Smart Folder without manual intervention.73.3.4 Static Folder ManagementFR-12 (Virtual Folders): Users must be able to create static folders that act as virtual containers. These do not exist in Google's database; the extension maintains a mapping of FolderID ->.FR-13 (Drag and Drop): Users must be able to drag a notebook card from the grid and drop it onto a folder in the sidebar to assign it. This interaction must visually indicate success (e.g., a "drop zone" highlight).22FR-14 (Nesting): The system must support nested folders (sub-folders) up to a depth of at least 3 levels to support complex taxonomies.243.4 Non-Functional Requirements (NFR)The Non-Functional Requirements define the quality attributes of the system.3.4.1 Performance and LatencyNFR-01 (Initialization Time): The extension must identify and render tags on the visible notebook grid within 500ms of the dashboard loading to prevent "pop-in" or visual jarring.NFR-02 (Filtering Speed): When a user clicks a folder, the filtering operation (hiding unmatched DOM elements) must execute in under 100ms for a dataset of 500 notebooks.NFR-03 (Scroll Performance): The extension's presence must not degrade the frame rate of the native scroll interaction. DOM manipulations must be efficient, utilizing requestAnimationFrame where appropriate.3.4.2 Data Privacy and StorageNFR-04 (Local-First Architecture): All metadata (tags, folder structures) must be stored in chrome.storage.local or chrome.storage.sync. No data may be transmitted to any third-party analytics server or cloud database.8NFR-05 (Quota Management): The system must respect the chrome.storage.sync limit of 100KB. It must implement data compression or fallback to local storage if the quota is exceeded, warning the user that sync is disabled for large libraries.253.4.3 Reliability and CompatibilityNFR-06 (DOM Resilience): The DOM selection logic must rely on heuristic attributes (e.g., aria-label, href patterns) rather than unstable CSS class names (e.g., .xy7-b) to ensure the extension survives minor updates to the Google NotebookLM frontend.26NFR-07 (SPA Navigation): The extension must monitor the browser's History API and URL changes to detect navigation events (e.g., returning to the dashboard from a notebook) and re-initialize the interface if necessary.134. Technical Feasibility and Reverse EngineeringTo build NotebookNest, we must first understand the hostile terrain of the host application. Google's web applications are notoriously difficult to extend due to their use of sophisticated build tools and Single Page Application (SPA) architectures.4.1 The NotebookLM DOM ArchitectureNotebookLM is an SPA, meaning it loads a single HTML shell and dynamically updates content using JavaScript. It likely relies on a framework similar to Angular or a custom internal framework that utilizes the Google Web Toolkit (GWT) or Closure Compiler.264.1.1 Class Name ObfuscationAs noted in research snippet 26, Google apps use programmatic class names like .VfPpkd-dgl2Hf-ppHlrf-sM5MNb. These are generated at build time. Relying on them is a recipe for failure, as the next Google deployment could change them to .AbC-123, breaking the extension.Mitigation Strategy: Heuristic SelectorsInstead of targeting classes, the extension must target structural and semantic attributes that are required for accessibility (A11y) and functional navigation. These are far less likely to change.Target ElementUnstable Selector (Avoid)Stable Heuristic Selector (Use)Notebook Card.notebook-grid-itema[href^="./notebook/"] (Anchor tag pointing to a notebook URL)Notebook Title.title-text-classThe first <h2> or <div> with role="heading" inside the card container.Card Menu.menu-button-xyzThe div or button containing an SVG with the specific "three dots" path data: d="M12 8c1.1 0...".Grid Container.grid-layout-123The parent container of the notebook cards, identified by traversing up from a card until a div with display: grid or flex is found.4.1.2 SPA Navigation and State ManagementIn an SPA, the window.onload event fires only once. When a user clicks a notebook and then clicks "Back," the page does not reload. The browser simply swaps the DOM nodes. A standard Chrome extension content script set to run_at: document_idle will inject once and then likely disappear or stop working after the first navigation.13Technical Solution: MutationObserverWe must implement a MutationObserver on the <body> element. This observer will watch for the addition of specific nodes.Monitor: Watch for the reappearance of the main dashboard grid (identified by the heuristic selectors above).Debounce: Since the observer might fire hundreds of times during a render, we must debounce the injection logic (e.g., wait 200ms after the last DOM change) before attempting to re-render the Sidebar.Idempotency: The injection function must be idempotent—it should check if (document.getElementById('notebooknest-sidebar')) return; to prevent creating duplicate sidebars.4.2 The "Virtual List" ChallengeFor performance, Google likely uses "virtualization" or "windowing" for the notebook grid. This means if a user has 100 notebooks, only the 12 visible on the screen actually exist in the DOM. The others are created and destroyed dynamically as the user scrolls.27Implication for Smart Folders:If a user creates a Smart Folder for "Physics," and the "Physics" notebook is currently scrolled off-screen (virtualized out), the extension cannot simply "hide the non-Physics notebooks" because the target notebook isn't there to be shown.Architectural Workaround: The Shadow IndexThe extension cannot rely on the DOM as its database. It must build its own Shadow Index in chrome.storage.local.Scraping: As the user scrolls, the extension "reads" every card that passes through the DOM and updates its local index: { ID: "nb-123", Title: "Physics 101", Date: "Jan 12" }.Proxy Rendering: When a Smart Folder is active, the extension essentially becomes the renderer. It hides Google's grid entirely and renders its own grid (using the Shadow Index data) into the main view area. Clicking a "Proxy Card" navigates the user to the correct URL.Risk: This is complex implementation but necessary for robust filtering of large lists.Fallback: For v1.0, we may accept the limitation and only filter visible items, warning users to "Scroll down to load all items" before filtering.4.3 API limitationsResearch confirms there is no public API for consumer NotebookLM accounts.19 The Enterprise Vertex AI API exists but uses different authentication and endpoints incompatible with the consumer version.Reverse Engineering Attempt: Snippet 18 suggests creating a "thin Python layer" or automation. For a Chrome extension, we are limited to the browser context. We cannot make direct fetch() calls to Google's backend because of CORS (Cross-Origin Resource Sharing) policies and the complexity of forging the X-Goog-AuthUser headers.Conclusion: The extension must be strictly "User Agent" based—interacting only with what the user sees on the screen (DOM Scraping) rather than attempting to talk to the backend servers directly.5. Solution Architecture and Data Design5.1 Extension Architecture (Manifest V3)The extension will be built on the Manifest V3 architecture, which mandates the use of Service Workers and places strict limits on background processes.Service Worker (background.js): Handles installation events, context menu creation, and coordinates data sync logic. It goes dormant when not in use.Content Script (content.js): The heavy lifter. Injected into notebooklm.google.com. It handles DOM observation, scraping, and UI injection.Popup (popup.html): Minimal use. Perhaps just "Settings" and "About." The primary UI is the injected Sidebar.5.2 The Storage Dilemma: Sync vs. LocalThe requirement to sync data across devices (FR-05, FR-07) conflicts with the strict quotas of the Chrome Sync API.9The Constraints:chrome.storage.sync: 100 KB total. Max 8KB per item.chrome.storage.local: 5 MB (expandable to unlimited).Data Sizing Analysis:A Notebook ID is a UUID (approx 36 bytes).A User Tag might be 10 bytes.A Folder Name might be 20 bytes.If a user has 500 notebooks, and each has 5 tags:500 * (36 + 50) bytes ≈ 43 KB.This fits in Sync, but barely. If the user adds descriptions or more complex metadata, we hit the limit.The Hybrid Storage Model:To ensure scalability, we will split the data model:Configuration Data (Sync): This is high-value, low-volume data. It includes the definitions of Smart Folders and the list of available tags (not the assignments).Example: SmartFolders =Size: Negligible (< 5KB).Relationship Data (Sync/Local Fallback): The mapping of NotebookID <-> FolderID and NotebookID <-> TagID.We will attempt to store this in sync using LZString compression.29If the compressed string exceeds 100KB, the extension creates a flag sync_disabled: true and degrades to local storage only, warning the user.Cache Data (Local Only): The cached titles, dates, and source counts used for the "Shadow Index." This is never synced; it is rebuilt on each device by scraping.5.3 The Logic Engine: Boolean Algebra in JavaScriptTo implement Smart Folders, we need a robust client-side evaluation engine. This engine takes a Notebook object and a Rule object and returns a Boolean.Data Structure for Rules:We will use a recursive JSON structure to represent the Boolean logic, allowing for infinite nesting of conditions.JSON{
  "type": "group",
  "operator": "AND",
  "children":
    }
  ]
}
Evaluation Logic (Pseudo-Code):JavaScriptfunction evaluateGroup(notebook, group) {
  const results = group.children.map(child => {
    if (child.type === 'group') return evaluateGroup(notebook, child);
    return evaluateRule(notebook, child);
  });

  if (group.operator === 'AND') return results.every(r => r === true);
  if (group.operator === 'OR') return results.some(r => r === true);
  if (group.operator === 'NOT') return!results;
}
This recursive approach allows us to support complex user queries like "All notebooks that are (Tagged 'Work' OR Title contains 'Client') AND (Not Modified in 30 Days)".5.4 Shadow DOM and CSS IsolationTo prevent the extension's CSS from "bleeding" into Google's app (e.g., our sidebar styles accidentally affecting Google's navigation) and vice-versa, we will encapsulate the Sidebar in a Shadow DOM.30Implementation:Create a host div in the document body.host.attachShadow({mode: 'open'}).Inject the Sidebar HTML and a <style> tag containing the Material 3 CSS specifically into this shadow root.Challenge: Drag-and-drop libraries often struggle with Shadow DOM boundaries because the dragover events originate inside the shadow root but need to interact with the main document (the notebook cards).Solution: We will use SortableJS, which has better support for Shadow DOM than React-based alternatives like dnd-kit or react-beautiful-dnd.31 We may need to attach event listeners to the document root and manually calculate coordinates if the native API events are swallowed by the shadow boundary.6. Implementation Roadmap and Engineering StrategyPhase 1: The "Viewer" and Discovery (Weeks 1-2)Goal: Establish the extension foothold and prove we can reliably identify notebooks.Sprint 1.1: Set up the Manifest V3 boilerplate and CI/CD pipeline.Sprint 1.2: Implement the MutationObserver logic to detect when the NotebookLM dashboard is fully loaded and stable.Sprint 1.3: Develop the "Heuristic Scraper." Write unit tests against saved HTML snapshots of the NotebookLM dashboard to ensure the scraper works against various potential DOM states (e.g., grid view vs. list view).Deliverable: An extension that logs "Found X notebooks" to the console whenever the user visits the dashboard.Phase 2: The "Parasitic" Sidebar (Weeks 3-4)Goal: Inject the UI and establish the visual language.Sprint 2.1: Build the Sidebar component using Web Components (Lit or vanilla JS) to keep dependencies light. Style it using Material 3 variables.Sprint 2.2: Implement the Shadow DOM injection into the main page.Sprint 2.3: Handle the responsive behavior (collapsing on small screens).Deliverable: A visible, collapsible sidebar that looks native to the Google interface but contains dummy data.Phase 3: Metadata and Storage (Weeks 5-6)Goal: Enable users to create tags and folders (Data Layer).Sprint 3.1: Implement chrome.storage.local schema. Build the "Shadow Index" that saves notebook metadata.Sprint 3.2: Build the "Add Tag" context menu. We will likely need to inject a small "meatball" menu icon (three dots) onto each card or piggyback on Google's existing menu if possible.Sprint 3.3: Render the Tag Chips onto the cards. This requires precise absolute positioning within the card container.Deliverable: Users can tag notebooks, and those tags persist after a page reload.Phase 4: The Logic Engine (Weeks 7-8)Goal: Connect the data to the UI (The "Smart" part).Sprint 4.1: Build the "Filter Builder" modal UI. This needs to be a user-friendly form for constructing the Boolean JSON rules.Sprint 4.2: Implement the Recursive Logic Engine (Javascript).Sprint 4.3: Connect the Sidebar clicks to the DOM visibility. When "Work" folder is clicked, iterate through all cards in the DOM and apply display: none to those that fail the logic test.Deliverable: Functional Smart Folders that filter the visible grid.Phase 5: Sync and Polish (Weeks 9-10)Goal: Production readiness.Sprint 5.1: Implement the LZString compression and the Hybrid Storage logic (sync vs local fallback).Sprint 5.2: Add "Drag and Drop" support for static folders using SortableJS.Sprint 5.3: Final QA and "Chaos Testing"—what happens if Google changes a class name? Ensure the "Safe Mode" fallback works (sidebar disables itself rather than crashing the page).7. UX Design Specifications7.1 Visual LanguageThe success of the extension depends on it feeling "invisible." It should not look like an add-on; it should look like a feature Google forgot to ship.Font: usage of Google Sans (if available in the host page context) or Roboto.Icons: Use Google Material Symbols (Outlined). The "Folder" icon should match the weight and fill style of existing NotebookLM icons.Elevation: The Sidebar should have a Z-index of 999—high enough to float over the content but lower than Google's own modals (z-index: 1000+).7.2 Sidebar Interaction DesignDrag Hover: When a user drags a notebook card over a Static Folder, the folder row should highlight with a surface-variant background color to indicate it is a valid drop target.Smart Folder Rejection: If a user drags a card over a Smart Folder, the cursor must change to not-allowed. The UI should perhaps show a tooltip: "Smart Folders are automatic. Edit the notebook's tags to add it here." This educates the user on the difference between the two folder types.7.3 The "Untagged" StrategyOne of the most powerful features to include is a default Smart Folder called "Untagged".Logic: NOT (Has Any Tag).Purpose: This creates an "Inbox Zero" workflow for notebooks. New notebooks created by the user automatically appear here until they are filed (tagged), satisfying the desire for order expressed by Persona A (The Researcher).8. Risks and Mitigation8.1 Legal and Terms of Service (ToS)Risk: Google may view the extension as violating ToS regarding automated scraping.Analysis: Browser extensions that modify the DOM for user customization are generally permitted. The extension does not scrape data for export or resale; it only reorganizes it locally for the user.Mitigation: The extension must be strictly local. No analytics. No "Sign Up" flow. It acts purely as a user-agent modifier.8.2 The "Infinite Scroll" BreakageRisk: We touched on this in section 4.2. If Google changes their virtualization logic, our "Shadow Index" might get out of sync with reality (e.g., clicking a proxy card leads to a 404).Mitigation: The "Proxy Cards" should verify the link validity (via a HEAD request or checking the DOM) before navigation.8.3 Performance ImpactRisk: Injecting heavy JS into an already heavy SPA could cause UI lag.Mitigation:Use requestIdleCallback for non-essential tasks (like background scraping).Limit the MutationObserver scope to the specific grid container, not the entire document.body.9. ConclusionNotebookNest fills a rapidly widening gap in the NotebookLM ecosystem. As the platform transitions from an experimental tool to a daily driver for knowledge workers, the need for robust organization becomes non-negotiable. By leveraging a privacy-centric, client-side architecture that combines the flexibility of Smart Folders with the granular control of Metadata Tagging, NotebookNest does not just organize content—it upgrades the user's mental model of their research.The technical path is challenging, requiring deep reverse-engineering of Google's SPA architecture and a creative "Hybrid Storage" solution to bypass browser limits. However, the resulting product—a seamless, integrated workspace for power users—represents a significant value add, turning a flat list of documents into a structured, queryable knowledge engine. This PORD and technical specification provide the roadmap to execute this vision with precision.